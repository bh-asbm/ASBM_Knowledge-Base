"use strict";(self.webpackChunkmasonry_knowledge_base=self.webpackChunkmasonry_knowledge_base||[]).push([[709],{5605:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"how-to/search-algolia","title":"Algolia DocSearch Setup","description":"Configure dual-mode search with Algolia DocSearch and Pagefind fallback","source":"@site/docs/how-to/search-algolia.md","sourceDirName":"how-to","slug":"/how-to/search-algolia","permalink":"/docs/how-to/search-algolia","draft":false,"unlisted":false,"editUrl":"https://github.com/bh-asbm/ASBM_Knowledge-Base/edit/main/docs/how-to/search-algolia.md","tags":[],"version":"current","lastUpdatedAt":1760079461000,"frontMatter":{"title":"Algolia DocSearch Setup","description":"Configure dual-mode search with Algolia DocSearch and Pagefind fallback","last_verified":"2025-10-10"},"sidebar":"docs","previous":{"title":"Troubleshooting Efflorescence","permalink":"/docs/quick-guides/troubleshooting-efflorescence"},"next":{"title":"Changelog","permalink":"/docs/meta/changelog"}}');var a=n(4848),s=n(8453);const r={title:"Algolia DocSearch Setup",description:"Configure dual-mode search with Algolia DocSearch and Pagefind fallback",last_verified:"2025-10-10"},o="Algolia DocSearch Setup",d={},c=[{value:"Dual-Mode Behavior",id:"dual-mode-behavior",level:2},{value:"Algolia Mode (Primary)",id:"algolia-mode-primary",level:3},{value:"Pagefind Mode (Fallback)",id:"pagefind-mode-fallback",level:3},{value:"Applying for Algolia DocSearch",id:"applying-for-algolia-docsearch",level:2},{value:"Local Development Setup",id:"local-development-setup",level:2},{value:"GitHub Actions Configuration",id:"github-actions-configuration",level:2},{value:"Maintaining Dual-Mode Support",id:"maintaining-dual-mode-support",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Algolia search not appearing",id:"algolia-search-not-appearing",level:3},{value:"Build failures",id:"build-failures",level:3},{value:"Search results outdated",id:"search-results-outdated",level:3}];function t(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.header,{children:(0,a.jsx)(l.h1,{id:"algolia-docsearch-setup",children:"Algolia DocSearch Setup"})}),"\n",(0,a.jsxs)(l.p,{children:["This site supports ",(0,a.jsx)(l.strong,{children:"dual-mode search"}),": when Algolia DocSearch credentials are provided, the navbar displays an Algolia-powered search box. When credentials are absent, the site falls back to Pagefind-based search (accessible via ",(0,a.jsx)(l.code,{children:"/docs/search"}),")."]}),"\n",(0,a.jsx)(l.h2,{id:"dual-mode-behavior",children:"Dual-Mode Behavior"}),"\n",(0,a.jsx)(l.h3,{id:"algolia-mode-primary",children:"Algolia Mode (Primary)"}),"\n",(0,a.jsx)(l.p,{children:"When the following environment variables are set:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_APP_ID"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_SEARCH_API_KEY"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_INDEX_NAME"})}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"The site will:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Display Algolia DocSearch in the navbar"}),"\n",(0,a.jsx)(l.li,{children:"Use Algolia's cloud-hosted index for fast, typo-tolerant search"}),"\n",(0,a.jsx)(l.li,{children:"Still build Pagefind index as a fallback"}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"pagefind-mode-fallback",children:"Pagefind Mode (Fallback)"}),"\n",(0,a.jsxs)(l.p,{children:["When Algolia environment variables are ",(0,a.jsx)(l.strong,{children:"not"})," set:"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"The site operates as before with Pagefind-only search"}),"\n",(0,a.jsxs)(l.li,{children:["Pagefind search UI is available at ",(0,a.jsx)(l.code,{children:"/docs/search"})]}),"\n",(0,a.jsx)(l.li,{children:"No Algolia integration is loaded"}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"applying-for-algolia-docsearch",children:"Applying for Algolia DocSearch"}),"\n",(0,a.jsx)(l.p,{children:"Algolia offers free DocSearch hosting for open-source documentation projects:"}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["Visit ",(0,a.jsx)(l.a,{href:"https://docsearch.algolia.com/apply/",children:"https://docsearch.algolia.com/apply/"})]}),"\n",(0,a.jsxs)(l.li,{children:["Fill out the application form with:","\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Your documentation site URL"}),"\n",(0,a.jsx)(l.li,{children:"Repository URL"}),"\n",(0,a.jsx)(l.li,{children:"Contact email"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(l.li,{children:"Wait for approval (typically 1-2 weeks)"}),"\n",(0,a.jsxs)(l.li,{children:["Once approved, Algolia will provide:","\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_APP_ID"})}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"ALGOLIA_SEARCH_API_KEY"})," (public search-only key)"]}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_INDEX_NAME"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"local-development-setup",children:"Local Development Setup"}),"\n",(0,a.jsx)(l.p,{children:"To enable Algolia search locally:"}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsx)(l.p,{children:"Copy the example environment file:"}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-bash",children:"cp .env.example .env\n"})}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:["Edit ",(0,a.jsx)(l.code,{children:".env"})," and add your Algolia credentials:"]}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-bash",children:"ALGOLIA_APP_ID=your_app_id_here\nALGOLIA_SEARCH_API_KEY=your_search_api_key_here\nALGOLIA_INDEX_NAME=your_index_name_here\n"})}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsx)(l.p,{children:"Run the development server or build:"}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-bash",children:"npm start\n# or\nnpm run build\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Note:"})," The ",(0,a.jsx)(l.code,{children:".env"})," file is ignored by git and should never be committed."]}),"\n",(0,a.jsx)(l.h2,{id:"github-actions-configuration",children:"GitHub Actions Configuration"}),"\n",(0,a.jsx)(l.p,{children:"To enable Algolia in CI builds and deployments:"}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["Navigate to your repository's ",(0,a.jsx)(l.strong,{children:"Settings \u2192 Secrets and variables \u2192 Actions"})]}),"\n",(0,a.jsxs)(l.li,{children:["Add the following repository secrets:","\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_APP_ID"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_SEARCH_API_KEY"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.code,{children:"ALGOLIA_INDEX_NAME"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.p,{children:["Both the PR CI workflow (",(0,a.jsx)(l.code,{children:".github/workflows/pr-ci.yml"}),") and deploy workflow (",(0,a.jsx)(l.code,{children:".github/workflows/deploy.yml"}),") are configured to automatically use these secrets when available."]}),"\n",(0,a.jsx)(l.h2,{id:"maintaining-dual-mode-support",children:"Maintaining Dual-Mode Support"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Do not remove"})," Pagefind build scripts or components"]}),"\n",(0,a.jsx)(l.li,{children:"Pagefind remains the fallback when Algolia credentials are unavailable"}),"\n",(0,a.jsx)(l.li,{children:"Both search solutions can coexist without conflict"}),"\n",(0,a.jsx)(l.li,{children:"If Algolia secrets are not set in CI, builds will succeed with Pagefind-only mode"}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(l.h3,{id:"algolia-search-not-appearing",children:"Algolia search not appearing"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Verify environment variables are set correctly"}),"\n",(0,a.jsxs)(l.li,{children:["Check that all three variables (",(0,a.jsx)(l.code,{children:"ALGOLIA_APP_ID"}),", ",(0,a.jsx)(l.code,{children:"ALGOLIA_SEARCH_API_KEY"}),", ",(0,a.jsx)(l.code,{children:"ALGOLIA_INDEX_NAME"}),") are present"]}),"\n",(0,a.jsx)(l.li,{children:"Rebuild the site after adding credentials"}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"build-failures",children:"Build failures"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Algolia credentials are optional\u2014builds should never fail due to missing Algolia env vars"}),"\n",(0,a.jsxs)(l.li,{children:["Check that ",(0,a.jsx)(l.code,{children:"@docusaurus/theme-search-algolia"})," is installed: ",(0,a.jsx)(l.code,{children:"npm ci"})]}),"\n",(0,a.jsx)(l.li,{children:"Review build logs for specific errors"}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"search-results-outdated",children:"Search results outdated"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Algolia crawlers need to re-index your site periodically"}),"\n",(0,a.jsx)(l.li,{children:"Contact Algolia support to trigger manual re-crawls if needed"}),"\n",(0,a.jsx)(l.li,{children:"Pagefind is always regenerated on each build"}),"\n"]})]})}function h(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,a.jsx)(l,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,l,n)=>{n.d(l,{R:()=>r,x:()=>o});var i=n(6540);const a={},s=i.createContext(a);function r(e){const l=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function o(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:l},e.children)}}}]);